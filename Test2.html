<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seat Chopping System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #map {
      height: 80vh;
      width: 100%;
      position: relative;
    }

    /* SVG overlay */
    #floorplan {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none; /* so clicks pass through by default */
    }

    /* Make clickable SVG elements interactable */
    .clickable {
      pointer-events: all;
      cursor: pointer;
      transition: 0.2s ease;
    }

    .seat {
      fill: #6c757d;
    }

    .seat:hover {
      fill: #0d6efd;
    }

    .seat.booked {
      fill: #dc3545;
    }
  </style>
</head>
<body>
  <div class="container-fluid py-3">
    <h2 class="text-center mb-3">Food Centre Seat Chopping</h2>
    <div id="map"></div>
  </div>

  <!-- Load Google Maps -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAzUZ1FSozvqFSbmTHUSGldlkEpuKupKZs"></script>

  <script>
    // Initialize Google Map
    function initMap() {
      const location = { lat: 1.2966, lng: 103.7764 }; // Example: SMU area
      const map = new google.maps.Map(document.getElementById('map'), {
        zoom: 18,
        center: location,
        mapTypeId: 'satellite',
      });

      // Add SVG overlay
      const overlay = new google.maps.OverlayView();
      overlay.onAdd = function() {
        const layer = document.createElement('div');
        layer.innerHTML = `
          <svg id="floorplan" xmlns="http://www.w3.org/2000/svg">
            <!-- Example tables and chairs -->
            <circle class="seat clickable" id="seat1" cx="200" cy="200" r="10"></circle>
            <circle class="seat clickable" id="seat2" cx="230" cy="200" r="10"></circle>
            <circle class="seat clickable" id="seat3" cx="200" cy="230" r="10"></circle>
            <rect class="clickable" id="table1" x="210" y="210" width="30" height="15" fill="#f8f9fa" stroke="#6c757d"/>
          </svg>
        `;
        this.getPanes().overlayLayer.appendChild(layer);

        // Add interactivity
        const seats = layer.querySelectorAll('.seat');
        seats.forEach(seat => {
          seat.addEventListener('click', () => {
            if (seat.classList.contains('booked')) {
              seat.classList.remove('booked');
              alert(`Seat ${seat.id} unchopped!`);
            } else {
              seat.classList.add('booked');
              alert(`Seat ${seat.id} chopped!`);
            }
          });
        });
      };
      overlay.draw = function() {}; // No need for coordinates now
      overlay.setMap(map);
    }

    window.onload = initMap;
  </script>
</body>
</html>
